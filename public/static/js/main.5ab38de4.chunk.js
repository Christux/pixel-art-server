(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{137:function(e,t,c){},138:function(e,t,c){},251:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c.n(a),r=c(23),i=c.n(r),s=(c(137),c(14)),l=c(17),o=c(37),d=c(18),j=c(19),u=(c(138),c(257)),b=c(254),h=c(124),O=c(6),m=c(12);var f=c(13),x=c.n(f),g=c(16),p=c(9),v=c.n(p),y="".concat("","/images"),k="".concat("","/upload"),N=(Object(m.b)({key:"imageFetching",default:!1}),Object(m.b)({key:"imageId",default:0})),C=(Object(m.c)({key:"imageObject",get:function(e){var t=e.get,c=t(N),a=t(I);if(c)return v.a.findWhere(a,{id:c})||{id:c,name:"",duration:10,images:[]}}}),Object(m.c)({key:"imageSelector",get:function(){var e=Object(g.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("imageSelector inited"),e.next=4,fetch(y).then((function(e){return e.json()}));case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),set:function(e,t){(0,e.set)(I,t)}})),I=Object(m.b)({key:"imagesList",default:C}),S=Object(m.c)({key:"randomImage",get:function(e){var t=(0,e.get)(I),c=t[Math.round(1e5*Math.random())%t.length];return console.log({thisImage:c}),c}}),w=c(1);function D(e){var t=Object(m.d)(S),c=Object(O.a)(t,1)[0];return Object(w.jsx)("div",{className:"c-header u-pad--20 u-flex u-flex--align-center u-flex--justify-between",children:Object(w.jsxs)(b.a,{className:"u-w--1",children:[Object(w.jsx)(h.a,{xs:12,md:6,className:"u-margin--bottom-20",children:Object(w.jsx)("div",{className:"c-header-branding u-flex u-flex--align-center",children:Object(w.jsxs)("div",{className:"home-link u-flex u-cursor--pointer","data-target":"welcome",children:[Object(w.jsx)("img",{className:"u-margin--right-20",src:""+(null===c||void 0===c?void 0:c.path),alt:null===c||void 0===c?void 0:c.path}),Object(w.jsx)("h2",{className:"c-header-title u-margin--bottom-0",children:e.title})]})})}),Object(w.jsx)(h.a,{xs:12,md:6,children:Object(w.jsx)("div",{className:"c-header-links sm-3 col-xs-12",children:e.children})})]})})}var L=c(255),R=c(256);function P(e){return Object(w.jsxs)(L.a,{className:"c-link-list","aria-label":"First group",children:[Object(w.jsx)(R.a,{variant:"light",className:"imageupload"===e.activeScreen?"is-active":"","data-target":"imageupload",onClick:e.onClick,children:"Images"}),Object(w.jsx)(R.a,{variant:"light",className:"clientconfig"===e.activeScreen?"is-active":"","data-target":"clientconfig",onClick:e.onClick,children:"Clients"}),Object(w.jsx)(R.a,{variant:"light",className:"imagesorter"===e.activeScreen?"is-active":"","data-target":"imagesorter",onClick:e.onClick,children:"Playlists"})]})}function T(e){return Object(w.jsxs)("div",{className:"u-pad--20",children:[Object(w.jsx)("p",{children:"Choose a function from the options above to get started."}),Object(w.jsxs)("ul",{children:[Object(w.jsx)("li",{children:"Images - upload images to display"}),Object(w.jsx)("li",{children:"Clients - configure clients for correct image display"}),Object(w.jsx)("li",{children:"Playlists - arrange one or more images into a sequence, adjust timings etc."})]})]})}var G=c(3),F=c(20),q="".concat("","/clients"),A=("".concat("","/client_playlists"),Object(m.b)({key:"clientFetching",default:!1}),Object(m.b)({key:"clientId",default:0})),W=Object(m.c)({key:"clientObject",get:function(e){var t=e.get,c=t(A),a=t(z);if(c)return v.a.findWhere(a,{id:c})}}),E=Object(m.c)({key:"clientSelector",get:function(){var e=Object(g.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(q).then((function(e){return e.json()}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),set:function(e,t){(0,e.set)(z,t)}}),z=Object(m.b)({key:"clientsList",default:E}),B=c(260),J="".concat("","/imagesets"),U="".concat("","/imageset"),_=(Object(m.b)({key:"playlistFetching",default:!1}),Object(m.b)({key:"playlistId",default:0})),K=Object(m.b)({key:"formPlaylist",default:{}}),M=Object(m.c)({key:"playlistObject",get:function(e){var t=e.get;if(!v.a.isEmpty(t(K)))return t(K);var c=t(_),a=t(Y);if(c){var n=v.a.clone(v.a.findWhere(a,{id:c}));return n?(n.images=n.images?n.images.slice():[],n):X(c)}},set:function(e,t){(0,e.set)(K,t)}}),X=function(e){return{id:e,name:"",duration:10,images:[]}},H=Object(m.c)({key:"playlistSelector",get:function(){var e=Object(g.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(J).then((function(e){return e.json()}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),set:function(e,t){(0,e.set)(Y,t)}}),Y=Object(m.b)({key:"PlaylistList",default:H}),Z=function(e){return Object(g.a)(x.a.mark((function t(){var c,a;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=new Request(q,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),t.next=3,fetch(c);case 3:return(a=t.sent).success&&console.log({promise:a}),t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})))};function Q(e){var t=Object(m.d)(W),c=Object(O.a)(t,1)[0],a=Object(m.d)(z),n=Object(O.a)(a,2),r=n[0],i=n[1],s=Object(m.d)(Y),l=Object(O.a)(s,1)[0],o=function(e){var t=r.slice(),a="checkbox"===e.target.type?e.target.checked:e.target.value;a="number"===e.target.type?parseInt(a):a;var n=v.a.defaults(Object(F.a)({},e.target.name,a),Object(G.a)({},c)),s=v.a.findWhere(t,{id:n.id}),l=t.indexOf(s);t.splice(l,1,n),i(t)},d=function(){var e=Object(g.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=Z(c),n=a().then((function(e){return e.json()})),console.log(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=c?Object(w.jsx)("div",{children:Object(w.jsxs)(B.a,{onSubmit:d,children:[Object(w.jsxs)(B.a.Row,{children:[Object(w.jsx)(h.a,{sm:"6",children:Object(w.jsxs)(B.a.Group,{controlId:"clientId",children:[Object(w.jsx)(B.a.Label,{children:"Client Name"}),Object(w.jsx)(B.a.Control,{name:"name",onChange:o,type:"text",value:c.name})]})}),Object(w.jsx)(h.a,{sm:"3",children:Object(w.jsxs)(B.a.Group,{controlId:"clientId",children:[Object(w.jsx)(B.a.Label,{children:"Client ID"}),Object(w.jsx)(B.a.Control,{name:"id",onChange:o,type:"text",value:c.id,disabled:!0}),Object(w.jsx)(B.a.Text,{className:"text-muted",children:"Set in client, locked."})]})})]}),Object(w.jsxs)(B.a.Row,{children:[Object(w.jsx)(h.a,{children:Object(w.jsxs)(B.a.Group,{className:"sm-3",controlId:"imagesetId",children:[Object(w.jsx)(B.a.Control,{as:"select",label:"Zigzag rows",name:"imagesetId",onChange:o,value:c.imagesetId,children:l.map((function(e,t){return Object(w.jsx)("option",{value:e.id,children:e.name},t)}))}),Object(w.jsx)(B.a.Text,{className:"text-muted",children:"Choose the playlist to show on this screen."})]})}),Object(w.jsx)(h.a,{})]}),Object(w.jsx)(B.a.Row,{children:Object(w.jsx)(h.a,{children:Object(w.jsx)(B.a.Group,{className:"sm-3",controlId:"save",children:Object(w.jsx)(R.a,{variant:"primary",type:"submit",children:"Save Config"})})})})]})}):Object(w.jsx)("div",{children:"Choose a client from the list to configure it."});return Object(w.jsx)("div",{children:j})}function V(e){var t=Object(m.e)(z),c=Object(m.g)(A),a=function(e){e.preventDefault(),c((function(t){return e.target.dataset.target}))};return Object(w.jsxs)("div",{className:"c-clients",children:[Object(w.jsx)("h4",{children:"Client List:"}),v.a.isEmpty(t)?"-- no clients registered --":t.map((function(e){return Object(w.jsx)("div",{className:"c-clients__single",children:Object(w.jsxs)("a",{href:"clients-{item-id}","data-target":e.id,onClick:a,children:[e.name," (",e.id,")"]})},e.id)}))]})}var $=function(e){Object(d.a)(c,e);var t=Object(j.a)(c);function c(e){var a;return Object(s.a)(this,c),(a=t.call(this,e)).state={userId:0},a}return Object(l.a)(c,[{key:"onClientSelect",value:function(e){e.preventDefault(),this.setState({userId:e.target.dataset.target})}},{key:"render",value:function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"u-pad--20",children:Object(w.jsx)("h4",{children:"Client configuration manager"})}),Object(w.jsx)(u.a,{fluid:!0,className:"u-h--1",children:Object(w.jsxs)(b.a,{className:"u-h--1",children:[Object(w.jsx)(h.a,{sm:"12",md:3,className:"sidebar u-pad--20",children:Object(w.jsx)(a.Suspense,{fallback:Object(w.jsx)("div",{children:"Loading..."}),children:Object(w.jsx)(V,{onClientSelect:this.onClientSelect.bind(this)})})}),Object(w.jsx)(a.Suspense,{fallback:Object(w.jsx)("div",{children:"Loading..."}),children:Object(w.jsx)(h.a,{className:"u-pad--20",children:Object(w.jsx)(Q,{clientId:this.state.userId})})})]})})]})}}]),c}(a.Component),ee=c(46);function te(e){var t=Object(ee.b)({id:e.id}),c=t.attributes,a=t.listeners,n=t.setNodeRef,r=t.transform,i=r?{transform:"translate3d(".concat(r.x,"px, ").concat(r.y,"px, 0)")}:void 0;return Object(w.jsx)("div",Object(G.a)(Object(G.a)(Object(G.a)({title:e.alt,className:"c-draggable",ref:n,style:i},a),c),{},{children:e.children}))}function ce(e){var t=Object(ee.c)({id:e.dropId}),c=t.isOver,a=t.setNodeRef,n={color:c?"green":void 0};return Object(w.jsx)("div",{ref:a,style:n,children:e.children})}var ae=c(261),ne=c(258);function re(e){var t=Object(m.d)(I),c=Object(O.a)(t,1)[0],n=Object(a.useState)([]),r=Object(O.a)(n,2),i=r[0],s=r[1],l=Object(a.useState)(""),o=Object(O.a)(l,2),d=o[0],j=o[1],u=Object(a.useState)(""),h=Object(O.a)(u,2),f=h[0],x=h[1],g=Object(a.useState)("");Object(O.a)(g,1)[0];Object(a.useEffect)((function(){s(v.a.uniq(e.selectedImageIds))}),[e.selectedImageIds]);var p=function(t){var a,n=v.a.uniq(i);return"selected"===t?a=v.a.compact(v.a.map(n,(function(e){return v.a.findWhere(c,{id:e})}))):(a=v.a.filter(c,(function(e){return-1===n.indexOf(e.id)})),d.length>2&&(a=v.a.filter(a,(function(e){return e.id.toLowerCase().indexOf(d.toLowerCase())>-1}))),""!==f&&(a=v.a.filter(a,(function(e){return e.id.indexOf(f)>-1})))),v.a.map(a,(function(t){return Object(w.jsx)(te,{id:t.id,alt:t.id.replace(/.png|.gif|.jpg/g,""),children:Object(w.jsx)("div",{style:{backgroundColor:e.backgroundColor},children:Object(w.jsx)("img",{className:"c-draggable-image",alt:t.id.replace(/.png|.gif|.jpg/g,""),src:"".concat("").concat(t.path)})})},t.id)}))},y=v.a.compact(v.a.uniq(v.a.map(c,(function(e){return 1!==e.id.split("/").length&&e.id.split("/")[0]}))));return Object(w.jsxs)(ae.a,{defaultActiveKey:"add-remove",id:"uncontrolled-tab-example",children:[Object(w.jsx)(ne.a,{eventKey:"add-remove",title:"Add / Remove",children:Object(w.jsxs)(ee.a,{onDragEnd:function(t){var c,a=!1;if(t.over&&"selectedImages"===t.over.id){var n=t.active.id;if(v.a.contains(i,n))return;(c=i.slice()).push(n),a=!0}if(t.over&&"allImages"===t.over.id){console.log({event:t});var r=t.active.id;if(!v.a.contains(i,r))return;(c=v.a.clone(i)).splice(i.indexOf(r),1),a=!0}a&&e.changeCallback(c)},children:[Object(w.jsxs)("div",{className:"c-draggable-list",children:[Object(w.jsx)("div",{className:"c-draggable-list-header",children:Object(w.jsx)("div",{className:"c-draggable-list-label",children:"Selected Images"})}),Object(w.jsx)(ce,{dropId:"selectedImages",className:"drop-zone",children:Object(w.jsx)("div",{className:"c-draggable-list-items",children:p("selected")})})]}),Object(w.jsxs)("div",{className:"c-draggable-list",children:[Object(w.jsxs)("div",{className:"c-draggable-list-header",children:[Object(w.jsx)(b.a,{children:Object(w.jsx)("div",{className:"c-draggable-list-label col-sm-12",children:"All Images"})}),Object(w.jsxs)(b.a,{children:[Object(w.jsxs)("div",{className:"c-draggable-list-filter col-sm-12 col-md-6",children:["Subdir:"," ",Object(w.jsxs)("select",{className:"u-flex--1",onChange:function(e){x(e.target.value)},value:f,children:[Object(w.jsx)("option",{value:"",children:"-- all --"}),v.a.map(y,(function(e){return Object(w.jsx)("option",{value:e,children:e})}))]}),Object(w.jsx)("div",{className:"c-draggable-list-filter-clear",onClick:function(e){x("")},children:"X"})]}),Object(w.jsxs)("div",{className:"c-draggable-list-filter col-sm-12 col-md-6",children:["Filter:"," ",Object(w.jsx)("input",{type:"text",onChange:function(e){j(e.target.value)},value:d,className:"u-flex--1"}),Object(w.jsx)("div",{className:"c-draggable-list-filter-clear",onClick:function(e){j("")},children:"X"})]})]})]}),Object(w.jsx)(ce,{dropId:"allImages",className:"drop-zone",children:Object(w.jsx)("div",{className:"c-draggable-list-items",children:p("unselected")})})]})]})}),Object(w.jsx)(ne.a,{eventKey:"reorder",title:"Re-Order",children:Object(w.jsx)("p",{children:"This feature not implemented yet"})})]})}var ie=c(259);function se(e){return Object(w.jsxs)(ie.a,Object(G.a)(Object(G.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(w.jsx)(ie.a.Header,{closeButton:!0,children:Object(w.jsx)(ie.a.Title,{id:"contained-modal-title-vcenter",children:"Confirmation"})}),Object(w.jsx)(ie.a.Body,{children:Object(w.jsxs)("p",{children:["Are you sure you want to delete",Object(w.jsx)("br",{}),"the imageset `",e.title,"`?"]})}),Object(w.jsxs)(ie.a.Footer,{children:[Object(w.jsx)(R.a,{onClick:e.onAccept,children:"Yes"}),Object(w.jsx)(R.a,{onClick:e.onDecline,children:"Cancel"})]})]}))}var le=c(131);function oe(e){var t=Object(m.d)(M),c=Object(O.a)(t,2),n=c[0],r=c[1],i=Object(m.d)(Y),s=Object(O.a)(i,2),l=s[0],o=s[1],d=Object(a.useState)(!1),j=Object(O.a)(d,2),u=j[0],b=j[1],f=Object(m.d)(z),p=Object(O.a)(f,2),y=p[0],k=p[1],N=Object(m.g)(_),C=function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value;t="number"===e.target.type?parseInt(t):t;var c=v.a.defaults(Object(F.a)({},e.target.name,t),Object(G.a)({},n));console.log({newLocalState:c}),r(c)},I=function(e){var t,c=l.slice(),a=v.a.findWhere(c,{id:n.id});if(a){var r=c.indexOf(a);c.splice(r,1);var i=(t=n.id,Object(g.a)(x.a.mark((function e(){var c,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new Request(U,{method:"delete",body:JSON.stringify({uid:t}),headers:{"Content-Type":"application/json"}}),e.next=3,fetch(c);case 3:return(a=e.sent).success&&console.log("image deleted OK"),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))),s=null;i().then((function(e){return s=e.json()})).then((function(e){s=e,console.log({finalresult:s}),s.success&&(N(0),o(c))}))}},S=v.a.isEmpty(n)?Object(w.jsx)("div",{children:"Choose a playlist from the list to configure it."}):Object(w.jsxs)("div",{children:[Object(w.jsxs)(B.a,{onSubmit:function(e){e.preventDefault();var t=l.slice(),c=v.a.findWhere(t,{id:n.id});if(c){var a=t.indexOf(c);t.splice(a,1,n)}else t.push(n);var r,i=(r=t,Object(g.a)(x.a.mark((function e(){var t,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Request(J,{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}),console.log({request:t}),e.next=4,fetch(t);case 4:return(c=e.sent).success&&console.log({promise:c}),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))),s=null;i().then((function(e){return s=e.json()})).then((function(e){s=e,console.log({finalresult:s}),s.success&&o(t)}));var d=v.a.map(y,(function(e){return v.a.clone(e)})),j=v.a.findWhere(d,{id:n.targetClientId});j&&(j.imagesetId=n.id,Z(j)(z).then((function(e){return s=e.json()})).then((function(e){s=e,console.log({finalresult:s}),k(d)})))},children:[Object(w.jsxs)(B.a.Row,{children:[Object(w.jsx)(h.a,{lg:2,md:6,children:Object(w.jsxs)(B.a.Group,{controlId:"imagesetId",children:[Object(w.jsx)(B.a.Label,{children:"playlist ID"}),Object(w.jsx)(B.a.Control,{name:"id",onChange:C,type:"text",value:n.id,disabled:!0}),Object(w.jsx)(B.a.Text,{className:"text-muted",children:"squential counter, locked."})]})}),Object(w.jsx)(h.a,{lg:5,md:6,children:Object(w.jsxs)(B.a.Group,{controlId:"name",children:[Object(w.jsx)(B.a.Label,{children:"Name"}),Object(w.jsx)(B.a.Control,{name:"name",onChange:C,value:n.name})]})}),Object(w.jsx)(h.a,{lg:2,md:6,children:Object(w.jsxs)(B.a.Group,{controlId:"duration",children:[Object(w.jsx)(B.a.Label,{children:"Image duration"}),Object(w.jsx)(B.a.Control,{name:"duration",onChange:C,type:"number",value:n.duration}),Object(w.jsx)(B.a.Text,{className:"text-muted",children:"Time each image displays for (seconds)."})]})})]}),Object(w.jsxs)(B.a.Row,{children:[Object(w.jsx)(h.a,{children:Object(w.jsxs)(B.a.Group,{className:"sm-3",children:[Object(w.jsx)(B.a.Label,{children:"Assign this playlist to a client:"}),Object(w.jsx)("br",{}),Object(w.jsxs)("select",{className:"u-flex--1",onChange:C,name:"targetClientId",value:n.targetClientId,children:[Object(w.jsx)("option",{value:"",children:"-- none --"}),v.a.map(y,(function(e){return Object(w.jsx)("option",{value:e.id,children:e.name})}))]})]})}),Object(w.jsx)(h.a,{children:Object(w.jsxs)(B.a.Group,{className:"sm-3",controlId:"colorPicker",children:[Object(w.jsx)(B.a.Label,{children:"Background colour"}),Object(w.jsx)(le.a,{alpha:!1,color:n.backgroundColor||"#000000",onChange:function(e){C({target:{type:"color",name:"backgroundColor",value:e.hex}})}})]})})]}),Object(w.jsxs)(B.a.Row,{children:[Object(w.jsx)(h.a,{md:6,lg:3,children:Object(w.jsx)(B.a.Group,{className:"sm-3",controlId:"save",children:Object(w.jsx)(R.a,{variant:"primary",type:"submit",children:"Save playlist"})})}),Object(w.jsx)(h.a,{md:6,lg:3,children:Object(w.jsx)(B.a.Group,{children:Object(w.jsx)(R.a,{variant:"warning",onClick:function(e){e.preventDefault(),b(!0)},children:"Delete playlist"})})})]}),Object(w.jsx)(re,{selectedImageIds:n.images,changeCallback:function(e){r(Object(G.a)(Object(G.a)({},n),{},{images:e}))},backgroundColor:n.backgroundColor||"#000000"})]}),Object(w.jsx)(se,{show:u,onAccept:function(e){b(!1),I()},onDecline:function(){return b(!1)},title:n.name})," "]});return Object(w.jsx)("div",{children:S})}function de(e){var t=Object(m.e)(Y),c=Object(m.g)(_),a=Object(m.g)(K),n=function(e){e.preventDefault(),a({}),c((function(t){return parseInt(e.target.dataset.target)}))};return Object(w.jsxs)("div",{className:"c-clients",children:[Object(w.jsx)("h4",{children:"Playlists:"}),Object(w.jsx)("div",{children:v.a.isEmpty(t)?"no playlists found":t.map((function(e){return Object(w.jsx)("div",{className:"c-clients__single",children:Object(w.jsx)("a",{href:"clients-{item-id}","data-target":e.id,onClick:n,children:e.name})},e.id)}))}),Object(w.jsx)(R.a,{className:"u-margin--top-20",onClick:function(e){var n=v.a.max(v.a.pluck(t,"id"));console.log(t),a({}),c((function(e){return n>0?n+1:1}))},variant:"light",type:"submit",children:"New Playlist"})]})}var je=function(e){Object(d.a)(c,e);var t=Object(j.a)(c);function c(e){var a;return Object(s.a)(this,c),(a=t.call(this,e)).state={userId:0},a}return Object(l.a)(c,[{key:"onImagesetSelect",value:function(e){e.preventDefault(),this.setState({userId:e.target.dataset.target})}},{key:"render",value:function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"u-pad--20",children:Object(w.jsx)("h4",{children:"Playlist manager"})}),Object(w.jsx)(u.a,{fluid:!0,className:"u-h--1",children:Object(w.jsxs)(b.a,{className:"u-h--1",children:[Object(w.jsx)(h.a,{xs:12,md:2,lg:2,className:"sidebar u-pad--20",children:Object(w.jsx)(a.Suspense,{fallback:Object(w.jsx)("div",{children:"Loading..."}),children:Object(w.jsx)(de,{className:"u-h--1",onImagesetSelect:this.onImagesetSelect.bind(this)})})}),Object(w.jsx)(a.Suspense,{fallback:Object(w.jsx)("div",{children:"Loading..."}),children:Object(w.jsx)(h.a,{xs:12,md:10,lg:10,className:"u-pad--20",children:Object(w.jsx)(oe,{ImagesetId:this.state.userId})})})]})})]})}}]),c}(a.Component),ue=c(132);function be(){var e=Object(a.useState)({uploadDir:""}),t=Object(O.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)([]),i=Object(O.a)(r,2),s=i[0],l=i[1],o=(Object(m.f)(I),Object(m.d)(I)),d=Object(O.a)(o,2),j=(d[0],d[1]);Object(a.useEffect)((function(){}));var u=Object(a.useCallback)((function(e){N(e)}),[]),b=Object(ue.a)({onDrop:u}),f=b.getRootProps,p=b.getInputProps,y=b.isDragActive,N=function(){var e=Object(g.a)(x.a.mark((function e(t){var c,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=v.a.map(t,(function(e){return new Promise((function(t){var c=new FileReader;c.onabort=function(){return console.log("file reading was aborted")},c.onerror=function(){return console.log("file reading has failed")},c.onload=function(){return t({uid:e.path,file:e,uri:c.result})},c.readAsDataURL(e)}))})),e.next=3,Promise.all(c).then((function(e){a=v.a.map(e,(function(e,t){return{uid:e.uid,element:Object(w.jsx)("img",{alt:e.uid,src:e.uri},t),file:e.file}}))}));case 3:console.log("dealWithUploads",{result:a}),l(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(g.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=v.a.map(s,(function(e){var t=e.file,a=new FormData;a.append("subdir",c.uploadDir),a.append("file",t),console.log("form.uploadDir: ".concat(c.uploadDir));var n=new Request(k,{method:"POST",body:a,headers:{}});return fetch(n).then((function(e){return e.json()}))})),Promise.all(t).then((function(e){var t=v.a.clone(s);v.a.each(e,(function(e){e.stats&&j((function(t){var c=v.a.clone(t);return c.push(e.stats),c})),t=v.a.filter(t,(function(t){return t.uid!==e.uid}))})),l(t)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=v.a.isEmpty(s)?Object(w.jsx)("p",{children:"Drag files here, or click to select files"}):Object(w.jsx)("p",{});return Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"u-pad--top-20",children:Object(w.jsx)("h4",{children:"Image uploader"})}),Object(w.jsx)("p",{children:"Upload your images by dropping them into the area below. When you have selected them, hit upload."}),Object(w.jsxs)(B.a,{onSubmit:function(e){e.preventDefault(),C()},children:[Object(w.jsx)(B.a.Row,{children:Object(w.jsx)(h.a,{sm:"4",children:Object(w.jsxs)(B.a.Group,{controlId:"uploadDir",children:[Object(w.jsx)(B.a.Label,{children:"Upload subdirectory"}),Object(w.jsx)(B.a.Control,{name:"uploadDir",onChange:function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value;t="number"===e.target.type?parseInt(t):t;var a=v.a.defaults(Object(F.a)({},e.target.name,t),Object(G.a)({},c));n(a)},type:"text",value:c.uploadDir}),Object(w.jsx)(B.a.Text,{className:"text-muted",children:"Optional subdir to upload files - can make filtering easier.."})]})})}),Object(w.jsx)(B.a.Row,{children:Object(w.jsx)(h.a,{children:Object(w.jsxs)("div",Object(G.a)(Object(G.a)({className:"c-filedropzone"},f()),{},{children:[Object(w.jsx)("input",Object(G.a)({},p())),Object(w.jsxs)("div",{className:"c-filedropzone-inner",children:[y?Object(w.jsx)("p",{children:"Drop the files here ..."}):S,Object(w.jsx)("div",{className:"upload",children:v.a.pluck(s,"element")})]})]}))})}),Object(w.jsx)(B.a.Row,{children:Object(w.jsx)(h.a,{children:Object(w.jsx)(B.a.Group,{className:"sm-3 u-margin--top-20",controlId:"save",children:Object(w.jsx)(R.a,{variant:"primary",type:"submit",children:"Upload"})})})})]})]})}var he=function(e){Object(d.a)(c,e);var t=Object(j.a)(c);function c(){var e;return Object(s.a)(this,c),(e=t.call(this)).state={currentScreen:"welcome"},e.linkClick=e.changeScreen.bind(Object(o.a)(e)),e}return Object(l.a)(c,[{key:"render",value:function(){var e;switch(console.log("this.state.currentScreen: ".concat(this.state.currentScreen)),this.state.currentScreen){case"imagesorter":e=Object(w.jsx)(je,{});break;case"welcome":e=Object(w.jsx)(T,{});break;case"clientconfig":e=Object(w.jsx)($,{});break;case"imageupload":e=Object(w.jsx)(be,{})}return Object(w.jsx)(m.a,{children:Object(w.jsxs)("div",{className:"App full-height",children:[Object(w.jsx)(u.a,{fluid:!0,className:"c-header-background",children:Object(w.jsx)(u.a,{children:Object(w.jsx)(a.Suspense,{fallback:Object(w.jsx)("div",{children:"Loading..."}),children:Object(w.jsx)(D,{title:"Pixel grid admin",homeclick:this.linkClick,children:Object(w.jsx)(P,{onClick:this.linkClick,activeScreen:this.state.currentScreen})})})})}),Object(w.jsx)(u.a,{className:"u-h--1",children:Object(w.jsx)(b.a,{className:"u-h--1",children:Object(w.jsx)(h.a,{className:"u-pad--20",children:e})})})]})})}},{key:"changeScreen",value:function(e){console.log(e),e.preventDefault(),this.setState({currentScreen:e.currentTarget.dataset.target})}}]),c}(a.Component),Oe=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,262)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;c(e),a(e),n(e),r(e),i(e)}))};i.a.render(Object(w.jsx)(n.a.StrictMode,{children:Object(w.jsx)(he,{})}),document.getElementById("root")),Oe()}},[[251,1,2]]]);
//# sourceMappingURL=main.5ab38de4.chunk.js.map