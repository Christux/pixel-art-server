(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{125:function(e,t,a){},126:function(e,t,a){},238:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(21),i=a.n(r),s=(a(125),a(14)),l=a(17),o=a(31),d=a(18),j=a(19),u=(a(126),a(241)),b=a(242),h=a(110),O=a(6),m=a(10);var x=a(13),g=a.n(x),f=a(16),p=a(11),v=a.n(p),y="".concat("","/images"),k="".concat("","/upload"),C=(Object(m.b)({key:"imageFetching",default:!1}),Object(m.b)({key:"imageId",default:0})),N=(Object(m.c)({key:"imageObject",get:function(e){var t=e.get,a=t(C),c=t(I);if(a)return v.a.findWhere(c,{id:a})||{id:a,name:"",duration:10,images:[]}}}),Object(m.c)({key:"imageSelector",get:function(){var e=Object(f.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(y).then((function(e){return e.json()}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),set:function(e,t){(0,e.set)(I,t)}})),I=Object(m.b)({key:"imagesList",default:N}),w=Object(m.c)({key:"randomImage",get:function(e){var t=(0,e.get)(I),a=t[Math.round(1e5*Math.random())%t.length];return console.log({thisImage:a}),a}}),S=a(1);function D(e){var t=Object(m.d)(w),a=Object(O.a)(t,1)[0];return Object(S.jsxs)("div",{className:"c-header u-pad--20 u-flex u-flex--align-center u-flex--justify-between",children:[Object(S.jsx)("div",{className:"c-header-branding u-flex u-flex--align-center",children:Object(S.jsxs)("div",{className:"home-link u-flex u-cursor--pointer","data-target":"welcome",children:[Object(S.jsx)("img",{className:"u-margin--right-20",src:""+a.path,alt:a.path}),Object(S.jsx)("h2",{className:"c-header-title u-margin--bottom-0",children:e.title})]})}),Object(S.jsx)("div",{className:"c-header-links",children:e.children})]})}var L=a(109),R=a(120);function T(e){return Object(S.jsxs)(L.a,{className:"c-link-list","aria-label":"First group",children:[Object(S.jsx)(R.a,{variant:"light",className:"imageupload"===e.activeScreen?"is-active":"","data-target":"imageupload",onClick:e.onClick,children:"Images"}),Object(S.jsx)(R.a,{variant:"light",className:"clientconfig"===e.activeScreen?"is-active":"","data-target":"clientconfig",onClick:e.onClick,children:"Clients"}),Object(S.jsx)(R.a,{variant:"light",className:"imagesorter"===e.activeScreen?"is-active":"","data-target":"imagesorter",onClick:e.onClick,children:"Playlists"})]})}function P(e){return Object(S.jsxs)("div",{className:"u-pad--20",children:[Object(S.jsx)("p",{children:"Choose a function from the options above to get started."}),Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:"Images - upload images to display"}),Object(S.jsx)("li",{children:"Clients - configure clients for correct image display"}),Object(S.jsx)("li",{children:"Playlists - arrange one or more images into a sequence, adjust timings etc."})]})]})}var G=a(3),z=a(20),F="".concat("","/clients"),q=(Object(m.b)({key:"clientFetching",default:!1}),Object(m.b)({key:"clientId",default:0})),A=Object(m.c)({key:"clientObject",get:function(e){var t=e.get,a=t(q),c=t(B);if(a)return v.a.findWhere(c,{id:a})}}),W=Object(m.c)({key:"clientSelector",get:function(){var e=Object(f.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(F).then((function(e){return e.json()}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),set:function(e,t){(0,e.set)(B,t)}}),B=Object(m.b)({key:"clientsList",default:W}),E=a(244),J="".concat("","/imagesets"),U="".concat("","/imageset"),_=(Object(m.b)({key:"imagesetFetching",default:!1}),Object(m.b)({key:"imagesetId",default:0})),M=Object(m.b)({key:"imageFormState",default:{}}),H=Object(m.c)({key:"imagesetObject",get:function(e){var t=e.get;if(!v.a.isEmpty(t(M)))return t(M);var a=t(_),c=t(V);if(a){var n=v.a.clone(v.a.findWhere(c,{id:a}));return n?(console.log(n),n.images=n.images?n.images.slice():[],n):Z(a)}},set:function(e,t){(0,e.set)(M,t)}}),Z=function(e){return{id:e,name:"",duration:10,images:[]}},K=Object(m.c)({key:"imagesetSelector",get:function(){var e=Object(f.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(J).then((function(e){return e.json()}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),set:function(e,t){(0,e.set)(V,t)}}),V=Object(m.b)({key:"imagesetsList",default:K});function X(e){var t=Object(m.d)(A),a=Object(O.a)(t,1)[0],c=Object(m.d)(B),n=Object(O.a)(c,2),r=n[0],i=n[1],s=Object(m.d)(V),l=Object(O.a)(s,1)[0],o=function(e){var t=r.slice(),c="checkbox"===e.target.type?e.target.checked:e.target.value;c="number"===e.target.type?parseInt(c):c;var n=v.a.defaults(Object(z.a)({},e.target.name,c),Object(G.a)({},a)),s=v.a.findWhere(t,{id:n.id}),l=t.indexOf(s);t.splice(l,1,n),i(t)},d=function(){var e=Object(f.a)(g.a.mark((function e(t){var c,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=new Request(F,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}),e.next=4,fetch(c).then((function(e){return e.json()}));case 4:n=e.sent,console.log(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=a?Object(S.jsx)("div",{children:Object(S.jsxs)(E.a,{onSubmit:d,children:[Object(S.jsxs)(E.a.Row,{children:[Object(S.jsx)(h.a,{sm:"6",children:Object(S.jsxs)(E.a.Group,{controlId:"clientId",children:[Object(S.jsx)(E.a.Label,{children:"Client Name"}),Object(S.jsx)(E.a.Control,{name:"name",onChange:o,type:"text",value:a.name})]})}),Object(S.jsx)(h.a,{sm:"3",children:Object(S.jsxs)(E.a.Group,{controlId:"clientId",children:[Object(S.jsx)(E.a.Label,{children:"Client ID"}),Object(S.jsx)(E.a.Control,{name:"id",onChange:o,type:"text",value:a.id,disabled:!0}),Object(S.jsx)(E.a.Text,{className:"text-muted",children:"Set in client, locked."})]})}),Object(S.jsx)(h.a,{sm:"3",children:Object(S.jsxs)(E.a.Group,{controlId:"pixelsCount",children:[Object(S.jsx)(E.a.Label,{children:"Pixels count"}),Object(S.jsx)(E.a.Control,{name:"pixelsCount",onChange:o,type:"number",value:a.pixelsCount,disabled:!0}),Object(S.jsx)(E.a.Text,{className:"text-muted",children:"Set in client, locked."})]})})]}),Object(S.jsxs)(E.a.Row,{children:[Object(S.jsx)(h.a,{sm:"2",children:Object(S.jsxs)(E.a.Group,{controlId:"width",children:[Object(S.jsx)(E.a.Label,{children:"Pixel width"}),Object(S.jsx)(E.a.Control,{name:"width",onChange:o,type:"number",value:a.width})]})}),Object(S.jsx)(h.a,{sm:"2",children:Object(S.jsxs)(E.a.Group,{controlId:"height",children:[Object(S.jsx)(E.a.Label,{children:"Pixel height"}),Object(S.jsx)(E.a.Control,{name:"height",onChange:o,type:"number",value:a.height})]})}),Object(S.jsx)(h.a,{sm:"4",children:Object(S.jsxs)(E.a.Group,{className:"sm-3",controlId:"direction",children:[Object(S.jsx)(E.a.Label,{children:"Row direction"}),Object(S.jsxs)(E.a.Control,{as:"select",name:"direction",onChange:o,children:[Object(S.jsx)("option",{children:"Choose the orientation of rows in the matrix"}),Object(S.jsx)("option",{value:"horizontal",children:"Horizontal"}),Object(S.jsx)("option",{value:"vertical",children:"Vertical"})]})]})}),Object(S.jsx)(h.a,{sm:"4",children:Object(S.jsxs)(E.a.Group,{className:"sm-3",controlId:"start",children:[Object(S.jsx)(E.a.Label,{children:"Starting point"}),Object(S.jsxs)(E.a.Control,{as:"select",name:"start",value:a.start,onChange:o,children:[Object(S.jsx)("option",{children:"location of the first pixel"}),Object(S.jsx)("option",{value:"topleft",children:"Top-left"}),Object(S.jsx)("option",{value:"topright",children:"Top-right"}),Object(S.jsx)("option",{value:"bottomleft",children:"Bottom-left"}),Object(S.jsx)("option",{value:"bottomright",children:"Bottom-right"})]})]})})]}),Object(S.jsx)(E.a.Row,{children:Object(S.jsx)(h.a,{children:Object(S.jsxs)(E.a.Group,{className:"sm-3",controlId:"zigzag",children:[Object(S.jsx)(E.a.Check,{type:"checkbox",label:"Zigzag rows",name:"zigzag",onChange:o,value:a.zigzag}),Object(S.jsx)(E.a.Text,{className:"text-muted",children:"Do the rows zigzag? If false, they are assumed to start at the same end."})]})})}),Object(S.jsx)(E.a.Row,{children:Object(S.jsx)(h.a,{children:Object(S.jsxs)(E.a.Group,{className:"sm-3",controlId:"imagesetId",children:[Object(S.jsx)(E.a.Control,{as:"select",label:"Zigzag rows",name:"imagesetId",onChange:o,value:a.imagesetId,children:l.map((function(e,t){return Object(S.jsx)("option",{value:e.id,children:e.name},t)}))}),Object(S.jsx)(E.a.Text,{className:"text-muted",children:"Do the rows imagesetId? If false, they are assumed to start at the same end."})]})})}),Object(S.jsx)(E.a.Row,{children:Object(S.jsx)(h.a,{children:Object(S.jsx)(E.a.Group,{className:"sm-3",controlId:"save",children:Object(S.jsx)(R.a,{variant:"primary",type:"submit",children:"Save Config"})})})})]})}):Object(S.jsx)("div",{children:"Choose a client from the list to configure it."});return Object(S.jsx)("div",{children:j})}function Y(e){var t=Object(m.e)(B),a=Object(m.g)(q),c=function(e){e.preventDefault(),a((function(t){return e.target.dataset.target}))};return Object(S.jsxs)("div",{className:"c-clients",children:[Object(S.jsx)("h4",{children:"Client List:"}),t.map((function(e){return Object(S.jsx)("div",{className:"c-clients__single",children:Object(S.jsx)("a",{href:"clients-{item-id}","data-target":e.id,onClick:c,children:e.id})},e.id)}))]})}var Q=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var c;return Object(s.a)(this,a),(c=t.call(this,e)).state={userId:0},c}return Object(l.a)(a,[{key:"onClientSelect",value:function(e){e.preventDefault(),this.setState({userId:e.target.dataset.target})}},{key:"render",value:function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"u-pad--20",children:Object(S.jsx)("h4",{children:"Client configuration manager"})}),Object(S.jsx)(u.a,{fluid:!0,className:"u-h--1",children:Object(S.jsxs)(b.a,{className:"u-h--1",children:[Object(S.jsx)(h.a,{sm:"2",className:"sidebar u-pad--20",children:Object(S.jsx)(c.Suspense,{fallback:Object(S.jsx)("div",{children:"Loading..."}),children:Object(S.jsx)(Y,{onClientSelect:this.onClientSelect.bind(this)})})}),Object(S.jsx)(c.Suspense,{fallback:Object(S.jsx)("div",{children:"Loading..."}),children:Object(S.jsx)(h.a,{className:"u-pad--20",children:Object(S.jsx)(X,{clientId:this.state.userId})})})]})})]})}}]),a}(c.Component),$=a(38);function ee(e){var t=Object($.b)({id:e.id}),a=t.attributes,c=t.listeners,n=t.setNodeRef,r=t.transform,i=r?{transform:"translate3d(".concat(r.x,"px, ").concat(r.y,"px, 0)")}:void 0;return Object(S.jsx)("div",Object(G.a)(Object(G.a)(Object(G.a)({title:e.alt,className:"c-draggable",ref:n,style:i},c),a),{},{children:e.children}))}function te(e){var t=Object($.c)({id:e.dropId}),a=t.isOver,c=t.setNodeRef,n={color:a?"green":void 0};return Object(S.jsx)("div",{ref:c,style:n,children:e.children})}var ae=a(245),ce=a(111);function ne(e){var t=Object(m.d)(I),a=Object(O.a)(t,1)[0],n=Object(c.useState)([]),r=Object(O.a)(n,2),i=r[0],s=r[1],l=Object(c.useState)(""),o=Object(O.a)(l,2),d=o[0],j=o[1],u=Object(c.useState)(""),b=Object(O.a)(u,2),h=b[0],x=b[1];Object(c.useEffect)((function(){s(v.a.uniq(e.selectedImageIds))}),[e.selectedImageIds]);var g=function(t){var c,n=v.a.uniq(i);return"selected"===t?c=v.a.compact(v.a.map(n,(function(e){return v.a.findWhere(a,{id:e})}))):(c=v.a.filter(a,(function(e){return-1===n.indexOf(e.id)})),d.length>2&&(c=v.a.filter(c,(function(e){return e.id.toLowerCase().indexOf(d.toLowerCase())>-1})))),v.a.map(c,(function(t){return Object(S.jsx)(ee,{id:t.id,alt:t.id.replace(/.png|.gif|.jpg/g,""),children:Object(S.jsx)("div",{style:{backgroundColor:e.backgroundColor},children:Object(S.jsx)("img",{className:"c-draggable-image",alt:t.id.replace(/.png|.gif|.jpg/g,""),src:"".concat("").concat(t.path)})})},t.id)}))};return Object(S.jsxs)($.a,{onDragEnd:function(t){var a,c=!1;if(t.over&&"selectedImages"===t.over.id){var n=t.active.id;if(v.a.contains(i,n))return;(a=i.slice()).push(n),c=!0}if(t.over&&"allImages"===t.over.id){console.log({event:t});var r=t.active.id;if(!v.a.contains(i,r))return;(a=v.a.clone(i)).splice(i.indexOf(r),1),c=!0}c&&e.changeCallback(a)},children:[Object(S.jsxs)(ae.a,{value:h,name:"mode",className:"mb-2",onChange:function(e){console.log("clicked: ".concat(e)),x(e)},children:[Object(S.jsx)(ce.a,{id:"add",value:"add",children:"Add & Remove"}),Object(S.jsx)(ce.a,{id:"sort",value:"sort",children:"Re-Order"})]}),Object(S.jsxs)("div",{className:"c-draggable-list",children:[Object(S.jsx)("div",{className:"c-draggable-list-header",children:Object(S.jsx)("div",{className:"c-draggable-list-label",children:"Selected Images"})}),Object(S.jsx)(te,{dropId:"selectedImages",className:"drop-zone",children:Object(S.jsx)("div",{className:"c-draggable-list-items",children:g("selected")})})]}),Object(S.jsxs)("div",{className:"c-draggable-list",children:[Object(S.jsxs)("div",{className:"c-draggable-list-header",children:[Object(S.jsx)("div",{className:"c-draggable-list-label",children:"All Images"}),Object(S.jsxs)("div",{className:"c-draggable-list-filter",children:["Filter:"," ",Object(S.jsx)("input",{type:"text",onChange:function(e){j(e.target.value)},value:d}),Object(S.jsx)("div",{className:"c-draggable-list-filter-clear",onClick:function(e){j("")},children:"X"})]})]}),Object(S.jsx)(te,{dropId:"allImages",className:"drop-zone",children:Object(S.jsx)("div",{className:"c-draggable-list-items",children:g("unselected")})})]})]})}var re=a(243);function ie(e){return Object(S.jsxs)(re.a,Object(G.a)(Object(G.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(S.jsx)(re.a.Header,{closeButton:!0,children:Object(S.jsx)(re.a.Title,{id:"contained-modal-title-vcenter",children:"Confirmation"})}),Object(S.jsx)(re.a.Body,{children:Object(S.jsxs)("p",{children:["Are you sure you want to delete",Object(S.jsx)("br",{}),"the imageset `",e.title,"`?"]})}),Object(S.jsxs)(re.a.Footer,{children:[Object(S.jsx)(R.a,{onClick:e.onAccept,children:"Yes"}),Object(S.jsx)(R.a,{onClick:e.onDecline,children:"Cancel"})]})]}))}var se=a(118),le=function(e){return Object(f.a)(g.a.mark((function t(){var a,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new Request(J,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),console.log({request:a}),t.next=4,fetch(a);case 4:return(c=t.sent).success&&console.log({promise:c}),t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})))};function oe(e){var t=Object(m.d)(H),a=Object(O.a)(t,2),n=a[0],r=a[1],i=Object(m.d)(V),s=Object(O.a)(i,2),l=s[0],o=s[1],d=Object(c.useState)(!1),j=Object(O.a)(d,2),u=j[0],b=j[1],x=Object(m.d)(B),p=Object(O.a)(x,1)[0],y=Object(m.g)(_),k=function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value;t="number"===e.target.type?parseInt(t):t;var a=v.a.defaults(Object(z.a)({},e.target.name,t),Object(G.a)({},n));r(a)},C=function(e){var t,a=l.slice(),c=v.a.findWhere(a,{id:n.id});if(c){var r=a.indexOf(c);a.splice(r,1);var i=(t=n.id,Object(f.a)(g.a.mark((function e(){var a,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Request(U,{method:"delete",body:JSON.stringify({uid:t}),headers:{"Content-Type":"application/json"}}),e.next=3,fetch(a);case 3:return(c=e.sent).success&&console.log("image deleted OK"),e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})))),s=null;i().then((function(e){return s=e.json()})).then((function(e){s=e,console.log({finalresult:s}),s.success&&(y(0),o(a))}))}},N=v.a.isEmpty(n)?Object(S.jsx)("div",{children:"Choose a imageset from the list to configure it."}):Object(S.jsxs)("div",{children:[Object(S.jsxs)(E.a,{onSubmit:function(e){e.preventDefault();var t=l.slice(),a=v.a.findWhere(t,{id:n.id});if(a){var c=t.indexOf(a);t.splice(c,1,n)}else t.push(n);console.log({saveImageSetsToServer:le}),le(t);var r=le(t),i=null;r().then((function(e){return i=e.json()})).then((function(e){i=e,console.log({finalresult:i}),i.success&&o(t)}))},children:[Object(S.jsxs)(E.a.Row,{children:[Object(S.jsx)(h.a,{sm:"2",children:Object(S.jsxs)(E.a.Group,{controlId:"imagesetId",children:[Object(S.jsx)(E.a.Label,{children:"Imageset ID"}),Object(S.jsx)(E.a.Control,{name:"id",onChange:k,type:"text",value:n.id,disabled:!0}),Object(S.jsx)(E.a.Text,{className:"text-muted",children:"squential counter, locked."})]})}),Object(S.jsx)(h.a,{sm:"6",children:Object(S.jsxs)(E.a.Group,{controlId:"name",children:[Object(S.jsx)(E.a.Label,{children:"Name"}),Object(S.jsx)(E.a.Control,{name:"name",onChange:k,value:n.name})]})}),Object(S.jsx)(h.a,{sm:"2",children:Object(S.jsxs)(E.a.Group,{controlId:"duration",children:[Object(S.jsx)(E.a.Label,{children:"Pixel duration"}),Object(S.jsx)(E.a.Control,{name:"duration",onChange:k,type:"number",value:n.duration}),Object(S.jsx)(E.a.Text,{className:"text-muted",children:"Time each image displays for."})]})}),Object(S.jsx)(h.a,{sm:"2",children:Object(S.jsxs)(E.a.Group,{controlId:"brightness",children:[Object(S.jsx)(E.a.Label,{children:"Pixel brightness"}),Object(S.jsx)(E.a.Control,{name:"brightness",onChange:k,type:"number",value:n.brightness}),Object(S.jsx)(E.a.Text,{className:"text-muted",children:"Time each image displays for."})]})})]}),Object(S.jsxs)(E.a.Row,{children:[Object(S.jsx)(h.a,{children:Object(S.jsxs)(E.a.Group,{className:"sm-3",controlId:"selectedClient",children:[Object(S.jsx)(E.a.Label,{children:"Show this playlist on these clients:"}),p.map((function(e){return Object(S.jsx)(E.a.Check,{id:e.name,type:"checkbox",label:e.name,name:"selectedClient",onChange:k,value:e.id},e.name)}))]})}),Object(S.jsx)(h.a,{children:Object(S.jsxs)(E.a.Group,{className:"sm-3",controlId:"colorPicker",children:[Object(S.jsx)(E.a.Label,{children:"Background colour"}),Object(S.jsx)(se.a,{alpha:!1,color:n.backgroundColor||"#000000",onChange:function(e){k({target:{type:"color",name:"backgroundColor",value:e.hex}})}})]})})]}),Object(S.jsxs)(E.a.Row,{children:[Object(S.jsx)(h.a,{sm:"2",children:Object(S.jsx)(E.a.Group,{className:"sm-3",controlId:"save",children:Object(S.jsx)(R.a,{variant:"primary",type:"submit",children:"Save playlist"})})}),Object(S.jsx)(h.a,{sm:"2",children:Object(S.jsx)(E.a.Group,{children:Object(S.jsx)(R.a,{variant:"warning",onClick:function(e){e.preventDefault(),b(!0)},children:"Delete playlist"})})})]}),Object(S.jsx)(ne,{selectedImageIds:n.images,changeCallback:function(e){r(Object(G.a)(Object(G.a)({},n),{},{images:e}))},backgroundColor:n.backgroundColor||"#000000"})]}),Object(S.jsx)(ie,{show:u,onAccept:function(e){b(!1),C()},onDecline:function(){return b(!1)},title:n.name})," "]});return Object(S.jsx)("div",{children:N})}function de(e){var t=Object(m.e)(V),a=Object(m.g)(_),c=Object(m.g)(M),n=function(e){e.preventDefault(),c({}),a((function(t){return parseInt(e.target.dataset.target)}))};return Object(S.jsxs)("div",{className:"c-clients",children:[Object(S.jsx)("h4",{children:"Playlists:"}),Object(S.jsx)("div",{children:t.map((function(e){return Object(S.jsx)("div",{className:"c-clients__single",children:Object(S.jsx)("a",{href:"clients-{item-id}","data-target":e.id,onClick:n,children:e.name})},e.id)}))}),Object(S.jsx)(R.a,{className:"u-margin--top-20",onClick:function(e){var n=v.a.max(v.a.pluck(t,"id"));console.log(t),c({}),a((function(e){return n>0?n+1:1}))},variant:"light",type:"submit",children:"New Playlist"})]})}var je=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var c;return Object(s.a)(this,a),(c=t.call(this,e)).state={userId:0},c}return Object(l.a)(a,[{key:"onImagesetSelect",value:function(e){e.preventDefault(),this.setState({userId:e.target.dataset.target})}},{key:"render",value:function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"u-pad--20",children:Object(S.jsx)("h4",{children:"Playlist manager"})}),Object(S.jsx)(u.a,{fluid:!0,className:"u-h--1",children:Object(S.jsxs)(b.a,{className:"u-h--1",children:[Object(S.jsx)(h.a,{xs:2,className:"sidebar u-pad--20",children:Object(S.jsx)(c.Suspense,{fallback:Object(S.jsx)("div",{children:"Loading..."}),children:Object(S.jsx)(de,{className:"u-h--1",onImagesetSelect:this.onImagesetSelect.bind(this)})})}),Object(S.jsx)(c.Suspense,{fallback:Object(S.jsx)("div",{children:"Loading..."}),children:Object(S.jsx)(h.a,{className:"u-pad--20",children:Object(S.jsx)(oe,{ImagesetId:this.state.userId})})})]})})]})}}]),a}(c.Component),ue=a(119);function be(){var e=Object(c.useState)({uploadDir:""}),t=Object(O.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)([]),i=Object(O.a)(r,2),s=i[0],l=i[1],o=Object(m.f)(I),d=Object(m.g)(I);Object(c.useEffect)((function(){}));var j=Object(c.useCallback)((function(e){y(e)}),[]),u=Object(ue.a)({onDrop:j}),b=u.getRootProps,x=u.getInputProps,p=u.isDragActive,y=function(){var e=Object(f.a)(g.a.mark((function e(t){var a,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.a.map(t,(function(e){return new Promise((function(t){var a=new FileReader;a.onabort=function(){return console.log("file reading was aborted")},a.onerror=function(){return console.log("file reading has failed")},a.onload=function(){return t({uid:e.path,file:e,uri:a.result})},a.readAsDataURL(e)}))})),e.next=3,Promise.all(a).then((function(e){c=v.a.map(e,(function(e,t){return{uid:e.uid,element:Object(S.jsx)("img",{alt:e.uid,src:e.uri},t),file:e.file}}))}));case 3:console.log({result:c}),l(c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(f.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=v.a.map(s,(function(e){var t=e.file,c=new FormData;c.append("subdir",a.uploadDir),c.append("file",t),console.log("form.uploadDir: ".concat(a.uploadDir));var n=new Request(k,{method:"POST",body:c,headers:{}});return fetch(n).then((function(e){return e.json()}))})),Promise.all(t).then((function(e){var t=v.a.clone(s);v.a.each(e,(function(e){e.stats&&d((function(t){var a=v.a.clone(t);return a.push(e.stats),a})),t=v.a.filter(t,(function(t){return t.uid!==e.uid}))})),l(t)})).then((function(e){o()}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=v.a.isEmpty(s)?Object(S.jsx)("p",{children:"Drag files here, or click to select files"}):Object(S.jsx)("p",{});return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"u-pad--top-20",children:Object(S.jsx)("h4",{children:"Image uploader"})}),Object(S.jsx)("p",{children:"Upload your images by dropping them into the area below. When you have selected them, hit upload."}),Object(S.jsxs)(E.a,{onSubmit:function(e){e.preventDefault(),C()},children:[Object(S.jsx)(E.a.Row,{children:Object(S.jsx)(h.a,{sm:"4",children:Object(S.jsxs)(E.a.Group,{controlId:"uploadDir",children:[Object(S.jsx)(E.a.Label,{children:"Upload subdirectory"}),Object(S.jsx)(E.a.Control,{name:"uploadDir",onChange:function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value;t="number"===e.target.type?parseInt(t):t;var c=v.a.defaults(Object(z.a)({},e.target.name,t),Object(G.a)({},a));n(c)},type:"text",value:a.uploadDir}),Object(S.jsx)(E.a.Text,{className:"text-muted",children:"Optional subdir to upload files - can make filtering easier.."})]})})}),Object(S.jsx)(E.a.Row,{children:Object(S.jsx)(h.a,{children:Object(S.jsxs)("div",Object(G.a)(Object(G.a)({className:"c-filedropzone"},b()),{},{children:[Object(S.jsx)("input",Object(G.a)({},x())),Object(S.jsxs)("div",{className:"c-filedropzone-inner",children:[p?Object(S.jsx)("p",{children:"Drop the files here ..."}):N,Object(S.jsx)("div",{className:"upload",children:v.a.pluck(s,"element")})]})]}))})}),Object(S.jsx)(E.a.Row,{children:Object(S.jsx)(h.a,{children:Object(S.jsx)(E.a.Group,{className:"sm-3 u-margin--top-20",controlId:"save",children:Object(S.jsx)(R.a,{variant:"primary",type:"submit",children:"Upload"})})})})]})]})}var he=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={currentScreen:"welcome"},e.linkClick=e.changeScreen.bind(Object(o.a)(e)),e}return Object(l.a)(a,[{key:"render",value:function(){var e;switch(console.log("this.state.currentScreen: ".concat(this.state.currentScreen)),this.state.currentScreen){case"imagesorter":e=Object(S.jsx)(je,{});break;case"welcome":e=Object(S.jsx)(P,{});break;case"clientconfig":e=Object(S.jsx)(Q,{});break;case"imageupload":e=Object(S.jsx)(be,{})}return Object(S.jsx)(m.a,{children:Object(S.jsxs)("div",{className:"App full-height",children:[Object(S.jsx)(u.a,{fluid:!0,className:"c-header-background",children:Object(S.jsx)(u.a,{children:Object(S.jsx)(c.Suspense,{fallback:Object(S.jsx)("div",{children:"Loading..."}),children:Object(S.jsx)(D,{title:"Pixel grid admin",homeclick:this.linkClick,children:Object(S.jsx)(T,{onClick:this.linkClick,activeScreen:this.state.currentScreen})})})})}),Object(S.jsx)(u.a,{className:"u-h--1",children:Object(S.jsx)(b.a,{className:"u-h--1",children:Object(S.jsx)(h.a,{className:"u-pad--20",children:e})})})]})})}},{key:"changeScreen",value:function(e){console.log(e),e.preventDefault(),this.setState({currentScreen:e.currentTarget.dataset.target})}}]),a}(c.Component),Oe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,246)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),c(e),n(e),r(e),i(e)}))};i.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(he,{})}),document.getElementById("root")),Oe()}},[[238,1,2]]]);
//# sourceMappingURL=main.6aa8440a.chunk.js.map